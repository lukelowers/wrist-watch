<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WristWatch Browser Test</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            background: white;
        }
        .success {
            border-left: 4px solid #22c55e;
        }
        .error {
            border-left: 4px solid #ef4444;
        }
        h1 {
            color: #333;
        }
        pre {
            background: #f9f9f9;
            padding: 10px;
            border-radius: 3px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>WristWatch Browser Test</h1>
    <div id="results"></div>

    <script type="module">
        import { WristWatch, now, add, format, parseISO } from './dist/index.mjs';

        const results = document.getElementById('results');

        function addResult(message, success = true) {
            const div = document.createElement('div');
            div.className = `test-result ${success ? 'success' : 'error'}`;
            div.textContent = message;
            results.appendChild(div);
        }

        try {
            // Test basic functionality
            const currentTime = WristWatch.now();
            addResult(`✓ WristWatch.now() works: ${currentTime.toISO()}`);

            const tomorrow = currentTime.add(1, 'day');
            addResult(`✓ add() works: ${tomorrow.toISO()}`);

            const formatted = currentTime.format('YYYY-MM-DD HH:mm:ss');
            addResult(`✓ format() works: ${formatted}`);

            // Test functional API
            const nowFunc = now();
            addResult(`✓ now() function works: ${nowFunc.toISO()}`);

            const nextWeek = add(nowFunc.getDate(), 7, 'day');
            addResult(`✓ add() function works: ${new Date(nextWeek).toISOString()}`);

            const formattedFunc = format(nowFunc.getDate(), 'MMMM D, YYYY');
            addResult(`✓ format() function works: ${formattedFunc}`);

            // Test comparison
            const isAfter = tomorrow.isAfter(currentTime);
            addResult(`✓ isAfter() works: ${isAfter}`);

            // Test parsing
            const parsed = parseISO('2025-12-06T10:30:00Z');
            addResult(`✓ parseISO() works: ${parsed.success}`);

            // Test timezone
            const utcTime = WristWatch.now(true);
            addResult(`✓ UTC time works: ${utcTime.toISO()}`);

            // Test arithmetic
            const diff = tomorrow.diff(currentTime, 'day');
            addResult(`✓ diff() works: ${diff} day(s)`);

            addResult('✅ All browser tests passed!');
        } catch (error) {
            addResult(`❌ Error: ${error.message}`, false);
            console.error(error);
        }
    </script>
</body>
</html>
